#4장 - 추상화 설계

---

- item26: 함수 내부의 추상화 레벨을 통일하라.
    - 추상화 레벨
        - 높은 레벨로 갈수록 물리 장치로부터 점점 멀어집니다.
        - 높은 레벨일 수록 프로세서로부터 멀어진다고 표현함
        - 높은 레벨일수룍 단숨함을 얻지만, 제어력을 잃습니다.
            - ex) C 언어는 메모리 관리를 직접 할 수 있지만, 자바는 가비지 컬렉터가 자동으로 메모리를 관리해 줍니다.(따라서 메모리 사용을 최적화하는 것이 힘듭니다.)
        - 코드도 추상화를 계층처럼 만들어서 사용할 수 있습니다. 이를 위한 기본적인 도구가 "함수"이다.
        - 함수도 높은 레벨과 낮은 레벨을 구분해서 사용해야 한다는 원칙이 있다.
            - 이를 추상화 레벨 통일(Single Level of Abstraction(SLA))원칙이라 부른다.

```kotlin
//추상화 레벨이 통일 되지 않은 케이스
class CoffeeMachine {

    fun makeCoffee() {
        // 수백 개의 변수를 선언
        // 복잡한 로직을 처리
        //  낮은 수준의 최적화도 여기에서 처리 
    }

}
```

```kotlin
//추상화 레벨이 통일된 케이스
class CoffeeMachine {

    // 높은 레벨
    fun makeCoffee() {
        boilWater()
        brewCoffee()
        pourCoffee()
        pourMilk()
    }

    // 낮은 레벨
    private fun boilWater() { // ... }
        private fun brewCoffee() { // ... }
            private fun pourCoffee() { // ... }
                private fun pourMilk() { // ... }

                }
```

- 함수는 간단해야 한다.
- 함수는 작아야 하며, 최소한의 책임만을 가져야 한다.
- 어떤 함수가 다른 함수보다 좀 복잡하다면, 일부 부분을 추출해서 추상화 하는 것이 좋다.

---

- item27: 변화로부터 코드를 보호하려면 추상화를 사용하라.
    - 추상화로 실질적인 코드를 숨기면, 사용자가 세부 사항을 알지 못해도 괜찮다는 장점이 있다.
    - 추상화의 몇가지 방법
        - 상수로 추출한다.
        - 동작을 함수로 래핑한다.
        - 함수를 클래스로 래핑한다.
        - 인터페이스 뒤에 클래스를 숨긴다.
        - 보편적인 객체(universal obejct)를 특수한 객체(special object)로 래핑한다.

- 추상화는 단순하게 중복성을 제거해서 코드를 구성하기 위한 것이 아닙니다.
- 추상화는 코드를 변경해야 할 때 도움이 됩니다.,
- 극단적인 추상화는 좋치않으니, 여러 경험을 통하여 균형을 찾아야 한다.

---

- item28: API 안정성을 확인하라.
    - 최대한 표준적인 API 를 선호한다.

---

- item29: 외부 API 를 랩(warp)해서 사용하라.
    - 래퍼 클래스
        - 어떤 코드를(기본 자료타입) 객체로 다루기 위해서 사용하는 클래스들
    - 박싱 언박싱
        - 기본 타입의 값을 포장 객체로 만드는 과정을 박싱
        - 반대로 포장객체에서 기본타입의 값을 얻어내는 과정을 언박싱이라 한다.

---

- item30: 요소의 가시성을 최소화하라.
    - 가시성과 관련된 제한은 한번 정해지면 변경하기 어렵다.
    - 프로퍼티를 외부에서 변경할 수 있다면 클래스는 자신의 상태를 보장할 수 없다.
    - 구체 접근자의 가시성을 제한해 모든 프로퍼티를 캡슐화 하는것이 좋다.
    - 제한될수록 클래스의 변경을 쉽게 추적할 수 있으며, 더 쉽게 이해할 수 있고, 배울 수 있다.

---

- item31: 문서로 규약을 정의하라.
    - 적당히 KDoc 스타일로 너무 과하지않게, 필요에 따라 잘남기자,
    - 함수 이름을 잘 적는게 중요할듯 하다.명확하게 보이게끔.

---

- item32: 추상화 규악을 지켜라.
    - 프로그램을 안정적으로 유지하고 싶다면, 규악을 잘 지키자.
  




