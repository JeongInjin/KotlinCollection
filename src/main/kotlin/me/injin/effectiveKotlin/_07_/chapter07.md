#7장 - 비용 줄이기

---
- item45: 불필요한 객체 생성을 피하라.
  - JVM 에서는 하나의 가상 머신에서 동일한 문자열을 처리하는 코드가 여러 개 있다면, 기존의 문자열을 재사용 한다. 
  - Integer 및 Long 처럼 박스화한 기본 자료형도 작은 값은 재사용 된다. 기본적으로 Int 는 -128~127 범위를 캐시해둔다
  - ex) 빈객체를 계속 생성하지말고 싱글톤과 공변성, nothing 리스트를 만들어서 사용하자
  - 계속 사용된다면 메모이제이션을 이용해 캐시화 하자.
  - 무거운 클래스를 사용할때 프로퍼티를 지연되게 만드는것이 좋다.
    - 호출에 대한 응답 시간이 길어 질 수 있으므로, 항상 좋은 것은 아니다.상황에 맞게 사용하자.
  - 코틀린/JVM 컴파일러는 내부적으로 최대한 기본 자료형을 사용하지만 두 가지 상황에서는 기본 자료형을 랩(wrap)한 자료형이 사용된다
    - nullable 한 타입을 연산할때(기본 자료형은 null 일 수 없으므로)
    - 타입을 제네릭으로 사용할 때
  - 성능이 아주 중요할 경우에만 활용하자
    - while 을 이용하여 nullable 한 값을 제거한다거나..
      - val iterator = iterator() 같은..
      - iterator.hasNext


---

- item46: 함수 타입 파마리터를 갖는 함수에 inline 한정자를 붙여라.
  - 컴파일시 함수를 호출하는 부분은 새로운 객체를 호출하는 코드로 컴파일되는데 inline 을 붙여 함수의 본문으로 대체한다.
  - 타입 아규먼트에 reified 한정자를 붙여서 사용할 수 있다.
    - 타입 파라미터를 사용한 부분이 타입 아규먼트로 대체된다.
  - 함수 타입 파라미터를 가진 함수가 훨씬 빠르게 동작한다.
    - inline 한정자를 붙이면 함수 호출과 리턴을 위해 점프하는 과정과 백스택을 추적하는 과정이 없기 떄문.
    - 함수 파라미터가 없는경우 성능 차이는 거의 없다.
  - 비지역(non-local) 리턴을 사용할 수 있다.

- 인라인 함수는 재귀적으로 동작할 수 없다.(인텔리제이 에서 오류로 잡아주지 못하여 매우 위험하다.)

---

- item47: 인라인 클래스의 사용을 고려하라.
  - 헐..몰랐는 inline 클래스는 Deprecated 됨. 대신 value 키워드와 @JvmInline 어노테이션 사용...
  - 특정 타입을 제한하는데 좋은것 같다..잘 사용할지는 미지수 지만, 필요한 부분이 캐치되면 사용해 봐야할듯 하다.
  

---

